<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Турнір</title>
  <link rel="stylesheet" href="balancer.css">
  <link rel="stylesheet" href="styles/balance.css">
  <style>
    :root {
      --green: #2ecc71;
      --red: #e74c3c;
      --yellow: #f1c40f;
      --blue: #3498db;
      --gray: #2d2f36;
      --card: #1f2229;
    }
    body.bal {
      background: #0e0f14;
      color: #f3f4f6;
    }
    .bal__card {
      background: var(--card);
      border: 1px solid #2f333c;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    }
    #tournament-view {
      display: flex;
      flex-direction: column;
      gap: 16px;
      padding: 16px;
    }
    .header-card h1 {
      margin: 0 0 4px;
      color: #fff;
    }
    .muted {
      color: #a2a5ad;
      margin: 0;
    }
    .actions {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 8px;
    }
    .btn {
      background: #13b36b;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 8px 24px rgba(0,0,0,0.25); }
    .btn:active { transform: translateY(0); }
    .btn.secondary { background: #353946; }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      margin-top: 12px;
    }
    .stat-card {
      background: #12141a;
      border: 1px solid #2c2f38;
      border-radius: 10px;
      padding: 12px;
    }
    .stat-label { color: #9ea2ae; font-size: 13px; margin: 0 0 4px; }
    .stat-value { color: #fff; font-size: 20px; font-weight: 700; margin: 0; }

    h2.section-title {
      margin: 0 0 8px;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      font-weight: 700;
    }
    .badge.mode-tr { background: rgba(52,152,219,0.18); color: var(--blue); border: 1px solid rgba(52,152,219,0.45); }
    .badge.mode-dm { background: rgba(241,196,15,0.18); color: var(--yellow); border: 1px solid rgba(241,196,15,0.45); }
    .badge.mode-kt { background: rgba(231,76,60,0.18); color: var(--red); border: 1px solid rgba(231,76,60,0.45); }
    .badge.status { background: rgba(19,179,107,0.16); color: var(--green); border: 1px solid rgba(19,179,107,0.5); }

    .table-responsive { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 10px 12px; text-align: left; }
    th { color: #c8ccd6; font-weight: 700; background: #141721; position: sticky; top: 0; }
    tbody tr:nth-child(odd) { background: #161924; }
    tbody tr:nth-child(even) { background: #12141c; }
    tbody tr:hover { background: #1f2433; }

    .match-section { margin-top: 12px; display: flex; flex-direction: column; gap: 10px; }
    .match-card {
      border: 1px solid #2b2f3b;
      border-radius: 12px;
      padding: 12px;
      background: #131621;
      display: grid;
      gap: 6px;
    }
    .match-title { font-weight: 700; color: #fff; margin: 0; }
    .match-meta { color: #9ea2ae; margin: 0; }
    .result-line { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; color: #e5e7eb; }
    .result-line strong { color: #fff; }
    .mmr-diff { color: var(--green); font-weight: 700; }
    .mmr-negative { color: var(--red); }

    .hidden { display: none !important; }
    #tournament-selector ul { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; }
    #tournament-selector li { display: flex; align-items: center; justify-content: space-between; background: #141721; padding: 10px 12px; border-radius: 10px; border: 1px solid #202432; }
    #tournament-selector .t-info { display: flex; flex-direction: column; gap: 2px; }
    #tournament-selector .t-name { font-weight: 700; color: #fff; }
    #tournament-selector .t-meta { color: #9ea2ae; font-size: 13px; }

    @media (max-width: 720px) {
      #tournament-view { padding: 12px; }
      th, td { padding: 8px; }
    }
  </style>
</head>
<body class="bal" data-app-mode="tournament">
  <main class="bal__main" id="tournament-view">
    <header class="bal__card header-card">
      <h1 id="tournament-title">Турнір</h1>
      <p id="tournament-meta" class="muted"></p>
      <div class="actions">
        <button id="refresh-tournament" class="btn">Оновити</button>
        <button id="back-to-selector" class="btn secondary hidden">Список турнірів</button>
      </div>
      <div class="stats-grid" id="tournament-stats"></div>
    </header>

    <section class="bal__card hidden" id="tournament-selector">
      <h2 class="section-title">Обрати турнір</h2>
      <div id="tournaments-empty" class="muted hidden">Немає доступних турнірів</div>
      <ul id="tournament-list"></ul>
    </section>

    <section class="bal__card" id="tournament-teams-section" data-requires-id="true">
      <h2 class="section-title">Команди</h2>
      <div class="table-responsive">
        <table id="teams-table">
          <thead>
            <tr>
              <th>Команда</th>
              <th>W</th>
              <th>L</th>
              <th>D</th>
              <th>Очки</th>
              <th>Avg MMR</th>
              <th>Місце</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="bal__card" id="tournament-players-section" data-requires-id="true">
      <h2 class="section-title">Гравці</h2>
      <div class="table-responsive">
        <table id="players-table">
          <thead>
            <tr>
              <th>Нік</th>
              <th>Команда</th>
              <th>Ігор</th>
              <th>W</th>
              <th>L</th>
              <th>D</th>
              <th>MVP</th>
              <th>2 місце</th>
              <th>3 місце</th>
              <th>Impact</th>
              <th>MMR Δ</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="bal__card" id="tournament-games-section" data-requires-id="true">
      <h2 class="section-title">Матчі</h2>
      <div id="matches-container"></div>
    </section>
  </main>

  <script type="module" src="scripts/config.js?v=2025-09-19-balance-hotfix-1"></script>
  <script type="module" src="scripts/logger.js?v=2025-09-19-balance-hotfix-1"></script>
  <script type="module" src="scripts/api.js?v=2025-09-19-balance-hotfix-1"></script>
  <script type="module" src="scripts/tournament.js?v=2025-12-02"></script>

</body>
</html>
