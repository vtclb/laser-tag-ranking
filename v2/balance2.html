<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LaserTag v2 · Балансер</title>
  <script type="module" src="./pages/global-styles.js"></script>
  <link rel="stylesheet" href="./assets/styles.css">
  <link rel="stylesheet" href="./styles/balance2.css">
</head>
<body>
  <main class="balance2-root">
    <section class="card status-card" id="statusBox" data-state="idle">
      <strong>Статус:</strong>
      <span id="statusText">Готово</span>
      <button id="retrySaveBtn" class="chip hidden" type="button">Повторити</button>
    </section>

    <section class="card hidden" id="restoreCard">
      <div class="restore-row">
        <span>Є збережене лобі. Відновити?</span>
        <button id="restoreBtn" class="chip">Відновити лобі</button>
      </div>
    </section>

    <section class="card">
      <div class="search-row">
        <input id="searchInput" class="search-input" type="search" placeholder="Швидкий пошук...">
        <select id="sortMode" class="chip">
          <option value="name_asc">А→Я (Нік)</option>
          <option value="name_desc">Я→А (Нік)</option>
          <option value="points_desc">Очки ↓</option>
          <option value="points_asc">Очки ↑</option>
        </select>
      </div>
      <div class="counts-row">
        <div id="playersCount" class="tag">Гравців: 0</div>
        <div id="selectedCount" class="tag">Обрано: 0 / 15</div>
      </div>
      <div id="playerList" class="player-list"></div>
    </section>

    <section class="card">
      <div class="section-head">
        <h3>Лобі (макс 15)</h3>
        <div class="row-btns">
          <button id="clearLobbyBtn" class="chip">Очистити</button>
        </div>
      </div>
      <div id="lobbyList" class="lobby-list"></div>
    </section>

    <section class="card" id="teamsCard">
      <div class="section-head">
        <h3>Команди</h3>
        <div class="league-controls">
          <label class="league-label" for="leagueSelect">Ліга</label>
          <select id="leagueSelect" class="chip">
            <option value="kids">Дитяча ліга</option>
            <option value="sundaygames">Доросла ліга</option>
          </select>
          <button id="loadPlayersBtn" class="chip">Завантажити гравців</button>
        </div>
        <small class="section-hint section-hint-tight">Оберіть лігу і натисніть «Завантажити», щоб підтягнути список гравців</small>
        <div id="teamCountControl" class="series-count-choices">
          <button type="button" class="chip" data-team-count="2">2 команди</button>
          <button type="button" class="chip" data-team-count="3">3 команди</button>
          <button type="button" class="chip" data-team-count="4">4 команди</button>
        </div>
        <div class="row-btns">
          <button id="balanceBtn" class="chip">Балансувати</button>
          <button id="manualBtn" class="chip">Ручний</button>
        </div>
      </div>
      <p class="section-hint">Баланс — автоматично, ручний — розкладай сам</p>
      <div id="teamsGrid" class="teams-grid"></div>
    </section>

    <section class="card" id="matchCard">
      <h3>Матч / Зберегти</h3>
      <p class="section-hint">Вкажи результати серії, MVP та штрафи, потім збережи</p>
      <div id="matchTeamsPreview" class="teams-grid"></div>
      <h4>Серія (3–7 боїв)</h4>
      <div class="series-count" id="seriesCountOptions">
        <span>К-сть боїв:</span>
        <div class="series-count-choices">
          <button class="chip" type="button" data-series-count="3">3</button>
          <button class="chip" type="button" data-series-count="4">4</button>
          <button class="chip" type="button" data-series-count="5">5</button>
          <button class="chip" type="button" data-series-count="6">6</button>
          <button class="chip" type="button" data-series-count="7">7</button>
          <button class="chip" type="button" data-series-reset="1">Очистити серію</button>
        </div>
      </div>
      <div id="seriesOptions" class="series-options"></div>
      <div id="matchSummary" class="match-summary"></div>
      <div class="kpi kpi-2">
        <label>MVP1 <input id="mvp1" list="participantsDatalist"></label>
        <label>MVP2 <input id="mvp2" list="participantsDatalist"></label>
        <label>MVP3 <input id="mvp3" list="participantsDatalist"></label>
      </div>
      <datalist id="participantsDatalist"></datalist>
      <div>
        <h4>Штрафи</h4>
        <div id="penaltiesList" class="penalties-list"></div>
      </div>
      <div class="save-sticky"><button id="saveBtn" class="chip save-btn">Зберегти матч</button></div>
    </section>
  </main>

  <script type="module" src="./scripts/balance2/app.js"></script>
</body>
</html>
